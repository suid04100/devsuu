name: 'Kafka Reprocessing Integration'

on:
  push:
    branches:
      - feature/testing
    paths:
      - 'reprocessing_configuration/int/*.json'
  pull_request:
    paths:
      - 'reprocessing_configuration/int/*.json'

jobs:
  callingServiceComposite_dev:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Extract API URL
        uses: ./.github/actions/extract-api-url
        id: extract-api-url
        with:
          directory-path: 'reprocessing_configuration/int/*.json'        

      - name: Send JSON Files with cURL
        uses: ./.github/actions/send-json-files
        with:
          API_URL: ${{ env.API_URL }}